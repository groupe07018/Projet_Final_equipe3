<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Liste des Chantiers</title>
    <style>
        .section {
            display: none;
        }
        .section.active {
            display: block;
        }
        .chantier-table {
            width: 100%;
            border-collapse: collapse;
        }
        .chantier-table th, .chantier-table td {
            border: 1px solid #ddd;
            padding: 8px;
        }
        .chantier-table th {
            background-color: #f2f2f2;
        }
        .button-container {
            margin-top: 20px;
            margin-bottom: 20px;
        }
        .button-container button {
            margin-right: 10px;
        }
        .top-right-buttons {
            position: absolute;
            top: 20px;
            right: 20px;
        }
    </style>
</head>
<body>
    <h1>Liste des Chantiers</h1>

    <div class="top-right-buttons">
        <button onclick="location.href='/'">Page principale</button>
        <button onclick="location.href='/logout'">Déconnexion</button>
    </div>

    <div class="button-container">
        <button onclick="location.href='/ajoutClient'">Ajouter un Client</button>
        <button onclick="location.href='/ajoutChantier'">Ajouter un Chantier</button>
        <button onclick="showSection('sectionChantiersEnCours')">Chantiers en cours</button>
        <button onclick="showSection('sectionChantiersArchives')">Chantiers archivés</button>
        <button onclick="showSection('sectionClients')">Clients</button>
    </div>

    <div id="sectionChantiersEnCours" class="section active">
        <h2>Chantiers en cours</h2>
        <table class="chantier-table">
            <thead>
                <tr>
                    <th>Nom du Projet</th>
                    <th>Adresse du Chantier</th>
                    <th>Client</th>
                    <th>Total Heures</th>
                    <th>Statut</th>
                    <th>Facture</th>
                </tr>
            </thead>
            <tbody>
                {{#each chantiersEnCours}}
                <tr>
                    <td>{{this.nom_projet}}</td>
                    <td>{{this.adresse_chantier}}</td>
                    <td>{{this.client_nom}}</td>
                    <td>{{this.total_heures}}</td>
                    <td>{{this.statut}}</td>
                    <td><button onclick="location.href='/facture/{{this.id}}'">Facture</button></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <div id="sectionChantiersArchives" class="section">
        <h2>Chantiers archivés</h2>
        <table class="chantier-table">
            <thead>
                <tr>
                    <th>Nom du Projet</th>
                    <th>Adresse du Chantier</th>
                    <th>Client</th>
                    <th>Total Heures</th>
                    <th>Statut</th>
                    <th>Facture</th>
                </tr>
            </thead>
            <tbody>
                {{#each chantiersArchives}}
                <tr>
                    <td>{{this.nom_projet}}</td>
                    <td>{{this.adresse_chantier}}</td>
                    <td>{{this.client_nom}}</td>
                    <td>{{this.total_heures}}</td>
                    <td>{{this.statut}}</td>
                    <td><button onclick="location.href='/facture/{{this.id}}'">Facture</button></td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <div id="sectionClients" class="section">
        <h2>Clients</h2>
        <table class="chantier-table">
            <thead>
                <tr>
                    <th>Nom</th>
                    <th>Courriel</th>
                    <th>Adresse</th>
                </tr>
            </thead>
            <tbody>
                {{#each clients}}
                <tr>
                    <td>{{this.nom}}</td>
                    <td>{{this.courriel}}</td>
                    <td>{{this.adresse_client}}</td>
                </tr>
                {{/each}}
            </tbody>
        </table>
    </div>

    <script>
        function showSection(sectionId) {
            // Masquer toutes les sections
            const sections = document.querySelectorAll('.section');
            sections.forEach(section => {
                section.classList.remove('active');
            });

            // Afficher la section sélectionnée
            const selectedSection = document.getElementById(sectionId);
            if (selectedSection) {
                selectedSection.classList.add('active');
            }
        }
    </script>
</body>
</html>


